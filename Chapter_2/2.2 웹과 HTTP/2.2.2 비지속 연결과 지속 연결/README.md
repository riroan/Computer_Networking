## 2.2.2 비지속 연결과 지속 연결

### 비지속 연결과 지속 연결

HTTP는 서버로 요청을 보내면 응답을 제공한다. 요구와 응답이 같은 TCP 연결으로 보내지면 **지속 연결**(persistent connection), 다른 연결로 보내지면 **비지속 연결**(non-persistent connection)이라고 한다.

HTTP는 기본적으로 지속 연결을 사용하지만 설정을 통해 비지속 연결로 사용할 수 있다.

### 비지속 연결 HTTP

비지속 연결 HTTP를 사용하면 클라이언트가 서버에게 요청을 보내고 TCP연결을 끊게 된다. 그 후 서버는 클라이언트에게 HTML파일 + 객체 개수만큼 TCP연결을 만들어 제공하게 된다. 페이지에 이미지가 5개라면 6개의 TCP연결을 만들어 응답한다.

TCP연결은 설정에 따라 순차적으로 또는 동시에 연결을 만들 수 있다. 동시 연결을 사용하면 응답 시간을 줄일 수 있다.

다만 각 객체 요청에 대한 새로운 연결이 설정되고 유지돼야해서 TCP 버퍼가 할당되어야 하고 변수들이 클라이언트, 서버에 모두 유지되어야하고 RTT가 2번 필요하다는 단점이 있다.

### RTT

클라이언트가 기본 HTML 파일을 요청하고 그 파일이 클라이언트에게 수신될 때까지의 시간을 **RTT**(round-trip time)이라고 한다. RTT는 패킷 전파 지연, 큐잉 지연, 패킷 처리 지연을 포함한다.

### 지속 연결 HTTP

지속 연결 HTTP를 사용하면 서버는 응답을 보내고 TCP연결을 유지하고 이후 같은 클라이언트와의 요청과 응답은 같은 연결을 통해 보내진다.

객체는 **파이프라이닝**(pipelining)을 통해 응답을 기다리지 않고 연속적으로 만들어질 수 있다.
